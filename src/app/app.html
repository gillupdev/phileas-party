<div class="container">
  <!-- Floating balloons -->
  <div class="balloon balloon-1">&#127880;</div>
  <div class="balloon balloon-2">&#127880;</div>
  <div class="balloon balloon-3">&#127880;</div>
  <div class="balloon balloon-4">&#127880;</div>
  <div class="balloon balloon-5">&#127880;</div>

  <!-- Confetti -->
  <div class="confetti confetti-1">&#127881;</div>
  <div class="confetti confetti-2">&#127881;</div>
  <div class="confetti confetti-3">&#127881;</div>

  <div class="card">
    <!-- Header -->
    <div class="header">
      <div class="age-badge">8</div>
      <h1 class="title">Phileas</h1>
      <p class="subtitle">Anniversaire !</p>
    </div>

    <!-- Party Info -->
    <div class="info-section">
      <div class="info-item">
        <span class="info-icon">&#128197;</span>
        <div class="info-text">
          <strong>23 Mars</strong>
          <span>Notez la date !</span>
        </div>
      </div>
      <div class="info-item">
        <span class="info-icon">&#127874;</span>
        <div class="info-text">
          <strong>On fait la fete !</strong>
          <span>Jeux & Surprises</span>
        </div>
      </div>
    </div>

    <!-- Error Message -->
    @if (error()) {
      <div class="error-message">
        &#9888; {{ error() }}
      </div>
    }

    <!-- RSVP Form -->
    @if (showForm()) {
      <div class="rsvp-section">
        <h2>Tu peux venir ?</h2>
        <div class="form-group">
          <input
            type="text"
            placeholder="Ton prenom"
            [ngModel]="guestName()"
            (ngModelChange)="guestName.set($event)"
            class="name-input"
            [disabled]="loading()"
          />
        </div>
        <div class="button-group">
          <button
            class="btn btn-yes"
            (click)="submitRSVP(true)"
            [disabled]="!guestName().trim() || loading()"
          >
            @if (loading()) {
              Envoi...
            } @else {
              Oui, je viens ! &#127881;
            }
          </button>
          <button
            class="btn btn-no"
            (click)="submitRSVP(false)"
            [disabled]="!guestName().trim() || loading()"
          >
            @if (loading()) {
              Envoi...
            } @else {
              Non, je ne peux pas &#128546;
            }
          </button>
        </div>
      </div>
    } @else {
      <div class="thank-you">
        @if (submitted()) {
          <h2>&#127881; Merci ! &#127881;</h2>
          <p>Ta reponse a ete enregistree !</p>
          <button class="btn btn-another" (click)="resetForm()">
            Ajouter un autre ami
          </button>
        }
      </div>
    }

    <!-- Guest List - Attending -->
    @if (attendingGuests.length > 0) {
      <div class="guest-list attending">
        <h3>&#127881; Amis qui viennent : {{ attendingGuests.length }}</h3>
        <div class="guests">
          @for (guest of attendingGuests; track guest.id) {
            <span class="guest-tag yes">{{ guest.name }}</span>
          }
        </div>
      </div>
    }

    <!-- Guest List - Not Attending -->
    @if (notAttendingGuests.length > 0) {
      <div class="guest-list not-attending">
        <h3>&#128546; Ne peuvent pas venir : {{ notAttendingGuests.length }}</h3>
        <div class="guests">
          @for (guest of notAttendingGuests; track guest.id) {
            <span class="guest-tag no">{{ guest.name }}</span>
          }
        </div>
      </div>
    }
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>A bientot ! &#127880;&#127874;&#127881;</p>
  </div>
</div>
